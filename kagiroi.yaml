algebra:
  gen_hebon_code:
    __append:
      # ヘボン式ローマ字入力をサポートします
      # ただし、歴史的仮名遣いに対するヘボン式ローマ字変換は基本的に提供していません
      # 例：「zu」は「ず」にのみ変換され、「づ」には変換されません。「づ」を入力する場合は訓令式の「du」を使用してください
      # 一部の単語については、辞書ファイルに新旧両方のヘボン式表記が登録されたため、どちらの入力でも変換可能です
      # 例：「横綱」→「yokozuna」「yokoduna」両方も対応

      # ti→chi、tya→cha
      - derive/;t(?:(i)|y([aueo]));/;ch$1$2;/
      # zi→ji、zya→jya
      - derive/;z(i|y[aiueo]);/;j$1;/
      # hu→fu、hwa→fa
      - derive/;h(?:(u)|w([aioe]));/;f$1$2;/
      # 子音が変化する場合の促音の処理
      # tchi→cchi、hfu→ffu
      - xform/;[tzh];([cjf])(.+);/;$1;$1$2;/
      # si→shi、sya→sha
      - derive/;s(?:(i)|y([aueo]));/;sh$1$2;/
      # jya→ja
      - derive/;jy([aueo]);/;j$1;/
      # tu→tsu、xtu→xtsu
      - derive/;(x?)tu;/;$1tsu;/
      # lで始まるの小書き文字の対応
      # 例：xa→la、xya→lya、xtsu→ltsu など
      - derive/;x([a-z]{1,3});/;l$1;/
      # 後ろに母音がない場合、「n」を「ん」に変換可能
      - derive/;nn;(?!aiueoy)/;n;/
  remove_delimiter:
    __append:
      - xform/;//