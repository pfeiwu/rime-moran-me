patch:
  # 简体改动 - 开始
  # 八股文模型
  octagram/enable_for_sentence/__patch/grammar/language: zh-hans-t-essay-bgw
  # 简繁转换opencc配置
  simplifier/opencc_config: s2t.json
  # switch状态
  switches/@2/states: [汉字, 漢字]
  # 使用简体版固定码表
  fixed/dictionary: moran_fixed_simp
  # 简体改动 - 结束

  # ctrl+d触发删用户词
  key_bindings/moran_switches/__append/+:
    - { when: has_menu, accept: "Control+d", send: "Shift+Delete" }
  # 所有容错码均可参与构词
  algebra/generate_code/__append:
    - derive|^(.+?);(\w)(\w)(?:;\w\w)*$|$1$2$3o| # 全碼 YYXXo
    - derive|^(.+?)(?:;\w\w){1};(\w)(\w)(?:;\w\w)*$|$1$2$3o| # 容錯碼1
    - derive|^(.+?)(?:;\w\w){2};(\w)(\w)(?:;\w\w)*$|$1$2$3o| # 容錯碼2
    - derive|^(.+?)(?:;\w\w){3};(\w)(\w)(?:;\w\w)*$|$1$2$3o| # 容錯碼3
    - derive|^(.+?)(?:;\w\w){4};(\w)(\w)(?:;\w\w)*$|$1$2$3o| # 容錯碼4
    - derive|^(.+?)(?:;\w\w){5};(\w)(\w)(?:;\w\w)*$|$1$2$3o| # 容錯碼5
    - derive|^(.+?);(\w)(\w)(?:;\w\w)*$|$1$2$3/| # 全碼 YYXX/
    - derive|^(.+?)(?:;\w\w){1};(\w)(\w)(?:;\w\w)*$|$1$2$3/| # 容錯碼1
    - derive|^(.+?)(?:;\w\w){2};(\w)(\w)(?:;\w\w)*$|$1$2$3/| # 容錯碼2
    - derive|^(.+?)(?:;\w\w){3};(\w)(\w)(?:;\w\w)*$|$1$2$3/| # 容錯碼3
    - derive|^(.+?)(?:;\w\w){4};(\w)(\w)(?:;\w\w)*$|$1$2$3/| # 容錯碼4
    - derive|^(.+?)(?:;\w\w){5};(\w)(\w)(?:;\w\w)*$|$1$2$3/| # 容錯碼5
    - abbrev/^(.+?);(\w)(\w)(?:;\w\w)*$/$1$2$3/ # 降低 YYXX 優先級
    - abbrev/^(.+?)(?:;\w\w){1};(\w)(\w)(?:;\w\w)*$/$1$2$3/ # 容錯碼1
    - abbrev/^(.+?)(?:;\w\w){2};(\w)(\w)(?:;\w\w)*$/$1$2$3/ # 容錯碼2
    - abbrev/^(.+?)(?:;\w\w){3};(\w)(\w)(?:;\w\w)*$/$1$2$3/ # 容錯碼3
    - abbrev/^(.+?)(?:;\w\w){4};(\w)(\w)(?:;\w\w)*$/$1$2$3/ # 容錯碼4
    - abbrev/^(.+?)(?:;\w\w){5};(\w)(\w)(?:;\w\w)*$/$1$2$3/ # 容錯碼5
    - derive/^(.+?);(\w)(\w)(?:;\w\w)*$/$1$2/ # 構詞可以用 YYX
    - derive/^(.+?)(?:;\w\w){1};(\w)(\w)(?:;\w\w)*$/$1$2/ # 容錯碼1
    - derive/^(.+?)(?:;\w\w){2};(\w)(\w)(?:;\w\w)*$/$1$2/ # 容錯碼2
    - derive/^(.+?)(?:;\w\w){3};(\w)(\w)(?:;\w\w)*$/$1$2/ # 容錯碼3
    - derive/^(.+?)(?:;\w\w){4};(\w)(\w)(?:;\w\w)*$/$1$2/ # 容錯碼4
    - derive/^(.+?)(?:;\w\w){5};(\w)(\w)(?:;\w\w)*$/$1$2/ # 容錯碼5
    - derive/^(.+?)(?:;\w\w)*$/$1/ # 構詞可以用 YY
    # ZRM-SPECIFIC: 特殊優化：部分音節字極少，幾乎不參與構詞，則提升對應四碼字的優先級
    # ZRM-SPECIFIC: （僅對自然碼雙拼有效，其他雙拼方案需作對應修改）
    - derive/^(.+?);(bd|df|dw|yl|rw|fs|iw|pd|sw|cz)(?:;\w\w)*$/$1$2/ # ZRM-SPECIFIC
    - derive/^(.+?)(?:;\w\w){1};(bd|df|dw|yl|rw|fs|iw|pd|sw|cz)(?:;\w\w)*$/$1$2/ # 容錯碼1
    - derive/^(.+?)(?:;\w\w){2};(bd|df|dw|yl|rw|fs|iw|pd|sw|cz)(?:;\w\w)*$/$1$2/ # 容錯碼2
    - derive/^(.+?)(?:;\w\w){3};(bd|df|dw|yl|rw|fs|iw|pd|sw|cz)(?:;\w\w)*$/$1$2/ # 容錯碼3
    - derive/^(.+?)(?:;\w\w){4};(bd|df|dw|yl|rw|fs|iw|pd|sw|cz)(?:;\w\w)*$/$1$2/ # 容錯碼4
    - derive/^(.+?)(?:;\w\w){5};(bd|df|dw|yl|rw|fs|iw|pd|sw|cz)(?:;\w\w)*$/$1$2/ # 容錯碼5
    - erase/^(.+?);(.+)$/ # 刪除原始編碼以加速檢索

  # english独立tag
  english/tag: english

  # 使用oj作为重复码
  quick_repeat/input: "oj"
  # 让oj自动上屏
  speller/auto_select_pattern: ^;(\w+|;)|oj

  # 启用单字注入次选功能
  moran/show_chars_anyway: true
  # 启用自由加词功能
  moran/pin/panacea/freestyle: true

  # 日语输入 - 开始
  schema/depenencies/+:
    - kagiroi
  engine/segmentors/@before 3: affix_segmentor@kagiroi
  engine/translators/+:
    - lua_translator@*kagiroi/kagiroi_translator
  kagiroi:
    prefix: ok
    tips: 〔火光〕
    tag: kagiroi
  recognizer/patterns/kagiroi: '(^ok[a-z\-]*$)'
  speller/alphabet: abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ/-;
  # 日语输入 - 结束